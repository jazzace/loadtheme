---
layout: post
title: Imaging is More Dead
---
<p>While doing some research earlier this week, I happened to load up <a href="https://support.apple.com/HT208020" target="_blank">Apple Support (KBase) Article HT208020,</a> the infamous “Imaging is Dead” article. I discovered that it received a significant update on 2018 May 10—significant enough that I thought it warranted a detailed comparison on this blog.</p>
<p>For reference, there have been three versions of this support article:</p>
<ul>
    <li><a href="https://web.archive.org/web/20180214041054/https://support.apple.com/en-us/HT208020" target="_blank">The original 2017 December 04 version</a> (link courtesy of the Internet Archive “Wayback Machine”);</li>
    <li>A version published on 2018 February 22<a href="#foot1" id="ref1"><sup>[1]</sup></a>—<a href="http://maclabs.jazzace.ca/2018/02/23/macaduk-slides-and-updates.html#ht208020" target="_blank">which I blogged about</a>—that was withdrawn on 2018 February 23 and replaced with the previous text; and</li>
    <li><a href="https://support.apple.com/HT208020" target="_blank">The current version of HT208020</a>, posted on 2018 May 10.</li>
</ul>
<h3>The Topic</h3>
<p>The article is no longer about <em>upgrading</em> the OS on your Mac if you read the article title, it’s about <em>installing</em> macOS. This isn’t as big a change as it seems—I’ll dig in to <em>why</em> a little later. The new article is still directed at “system administrators” (Mac Admins), but Apple has iterated their terminology in a minor way, referring to your “organization” rather than your business or education “institution.”</p>
<h3>No Subheads</h3>
<p>The new article has no sub-sections in it. The original had three sub-sections and a sub-sub-section on NetRestore images. The phantom February edition had four sub-sections, since it separated <cite>upgrading</cite> and <cite>installing</cite> into separate sections. For ease of discussion, I’m going to use those sub-sections in the discussion that follows.</p>
<h3>Before You Upgrade/Install</h3>
<p>The fact that you need to be connected to the Internet has been upgraded to a callout box. (In the original version, the only item that rated a callout box was the often-cited, “Apple doesn't recommend or support monolithic system imaging when upgrading or updating macOS.”) The message is more carrot than stick in this version, using words like “make sure that” and “which allows” rather than “You must”, “Only”, and “can’t be done.” The current version also covers the case where you were lucky enough <cite>(sarcasm)</cite> to download the “stub” macOS Installer, since that is another reason you might need an Internet connection during installation (to download the full installation payload). To sum up: there’s a change in emphasis and an iterative improvement to the text—nothing ground-breaking here.</p>
<h3>Upgrade/Install macOS</h3>
<p>The original version offered four supported methods to “install” macOS, even though the header said, “upgrade.” The phantom February version had four methods to explicitly upgrade (but not the same four) and three methods to (erase and) install. The current version offers five methods to install, of which three are explicitly OK “whether or not macOS is currently installed on the target volume.” Here they are, plus one additional case, in table format:</p>
<table>
	<thead>
	<tr> 
	    <th>Method</th>
	    <th>2017 December<br />Upgrade</th>	
	    <th>2018 February<br />Upgrade</th>	
	    <th>2018 February<br />Erase &amp; Install</th>	
	    <th>2018 May<br />Install</th> 
	</tr>
	</thead>
	<tbody>
	<tr> <th>macOS Installer (Mac App Store)</th> <td>Yes</td>	<td>Yes</td>	<td>-</td>	<td>Yes</td>	</tr>
	<tr> <th>Create &amp; use a bootable installer</th> <td>Yes</td> <td>Yes</td>	<td>Yes<br/>(Disk Utility to Erase)</td>	<td>Yes</td>	</tr>
	<tr> <th>Install macOS from Recovery</th> <td>Yes</td> <td>Yes</td>	<td>Yes<br/>(Disk Utility to Erase)</td>	<td>Yes</td> </tr>
	<tr> <th>Create &amp; use a NetInstall image with System Image Utility</th> <td>Yes</td> <td>-</td>	<td>-</td>	<td>-</td>	</tr>
	<tr> <th><code>startosinstall</code></th> <td>-</td> <td>Yes</td>	<td><code>--eraseinstall</code> coming in Spring 2018</td>	<td>Yes (10.13.4 installer supports <code>--eraseinstall</code>)</td> </tr>
	<tr> <th>Device Enrollment Program (DEP)</th> <td>-</td> <td>-</td>	<td>-</td>	<td>Yes<a href="#foot2" id="ref2"><sup>[2]</sup></a></td> </tr>
	<tr> <th>Mac connected via Target Disk Mode</th> <td>Unsupported</td> <td>Unsupported</td>	<td>image same OS via <code>asr</code> (except iMac Pro until 10.13.4)</td>	<td>All <code>asr</code> imaging unsupported</td>	</tr>
	</tbody>
</table>
<p>Note that a dash in the table indicates a method wasn’t mentioned in that version; it’s still possible that it might work. Also, the phantom February version only described erase-and-install methods in the <cite>Install macOS</cite> section. I originally read the May version this way as well—that Apple had removed the “upgrade” content for clarity and was defining <cite>install</cite> as implying erasure as a first step. That’s almost certainly wrong. I think Apple has simply cleaned up their terminology and are referring to any workflow that runs a full macOS Installer as an <cite>install,</cite> whether an earlier version of the OS is present on the target volume or not.</p>
<p>So what should we take from this section? My biggest takeaway is that NetInstall methods are far more dead than many anticipated.<a href="#foot3" id="ref3"><sup>[3]</sup></a> I was ambivalent about what NetInstall’s absence meant <a href="http://maclabs.jazzace.ca/2018/02/23/macaduk-slides-and-updates.html#ht208020" target="_blank"> in my blog post about the phantom February article update,</a> but I am ambivalent no longer; it’s clearly in the past.</p>
<p>Also, the change from “upgrade” to “install” appears to be just a terminology update. The <code>startosinstall</code> methods are now documented and DEP is now referenced.</p>
<h3>About monolithic system imaging</h3>
<p>I mentioned that the “Imaging is dead” callout box is gone, replaced by a simple sentence in the body of the article. I do think that particular callout box was vital to getting the message out to Mac Admins who refused to believe John Kitzmiller and others, who had proclaimed block copying of disk images were the way of the past as far back as 2013. But now, Apple appears to think the message has been received, so they have mostly transitioned to discussing what you <em>can</em> or <em>should</em> do, not what you <em>can’t</em> or <em>shouldn’t</em> do. This is in line with the style of the current version’s only callout box, as I described earlier.</p>
<p>This simplified statement about “monolithic system imaging” is also in line with that newer definition of “installing” that I mentioned earlier. Upon close inspection, it appears to encompass upgrading, updating, and even re-installing the same exact operating system. Apple’s use of the phrase “<em>might</em> not include model-specific information” (emphasis mine) means that traditional block-copying of a disk image <em>might work</em> under the right circumstances, but “Apple doesn't recommend or support” that method.</p>
<p>Apple also trimmed some fat from the article regarding creating a deployment image by cloning an existing APFS container. Since that original article (and the February one) never referenced HFS+ volumes, it appears Apple added it for the benefit of Mac Admins who were still using “Golden Machine” workflows but wanted/needed to purchase new Macs (I hear Apple makes good margins on their hardware—can’t impede sales, I guess). In retrospect, the Admins who held tight to their previous methods didn’t try out those previous instructions in any great numbers, generally choosing techniques like reverting to an earlier OS and/or reformatting SSD drives to use HFS+. Regardless, I think it’s safe to interpret the latest changes to mean that image-based deployments are unsupported, whether you are capturing images or creating them modularly with <a href="https://github.com/magervalp/autodmg" target="_blank">AutoDMG</a>. If Admins choose to ignore that advice, Apple doesn’t want to hear about it. That new wording is actually broader in scope than the original article (hence my title for this post).</p>
<p>The only equivocation I wish to make relates to a curious footnote in the phantom February version, which begins, “iMac Pro supports upgrading macOS with monolithic system imaging,” and then clarifies that this is a feature planned for 10.13.4. If someone with an iMac Pro wants to test this for me by wiping their system, that would be dandy (ha ha), but the inference there was that the (T2) chip that manages Secure Boot would cause the Mac call home to Apple to get any necessary firmware updates and “heal” your block-copied system on first boot. My guess (and it is only a guess) is that we might see some interesting security features coming as more Macs support Secure Boot. Apple has been sending a clear message that you need to be connected to the Internet when installing the operating system; perhaps this messaging was designed to prepare us for new features that the T2 chip (and its successors) might bring, so that Macs are as secure and up-to-date as possible when first deployed or re-deployed.</p>
<h3>Summary</h3>
<p>So it looks like System Image Utility’s days are numbered (and, by extension, NetInstall-based workflows). Image-based deployments are now no longer supported. Installations need to happen while you’re connected to the Internet. And, even though <a href="https://help.apple.com/applestyleguide/" target="_blank">Apple’s Style Guide</a> defines “upgrade” and “update” for us, the support article I have been discussing is now all about “installing.” It looks like Armin Briegel picked the right title for his upcoming eBook, “macOS Installation.”</p> 
<hr />
<p id="foot1">[1] I did capture a copy of this article, but I will not reproduce it in its entirety on my web site because Apple owns the copyright. <a href="#ref1">[Return to main text]</a></p>
<p id="foot2">[2] There is a fair bit of confusion about what Apple means by this and whether what they are suggesting even works right now. For the purpose of this discussion, I will just take this as an indicator that Apple felt that such an article should reference DEP, since that’s where they want all administrators to be, sooner than later. But if you want to dig a little deeper on this issue, I recommend you check out <a href="https://macadmins.slack.com/archives/C5NDQSDB2/p1527578805000378" target="_blank">a discussion amongst Armin Briegel, Neil Martin, Owen Pragel, and others in the Mac Admins Slack (membership required)</a> from May 29. <a href="#ref2">[Return to main text]</a></p>
<p id="foot3">[3] My sincere sympathies to <a href="https://scriptingosx.com/" target="_blank">Armin Briegel,</a> whose had written a section for his upcoming eBook on the NetInstall method of macOS Installation. I suspect it will still make it in to the book, but its usefulness will diminish as we start seeing more Macs that can’t boot from an <code>.nbi</code> (network disk image). This technique will be more of a 10.12.x one, not one for more current OSes. <a href="#ref3">[Return to main text]</a></p>